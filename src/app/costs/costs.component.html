<!-- ngFor keyvalue pipe = https://stackoverflow.com/questions/41396435/how-to-iterate-object-keys-using-ngfor/41396558 -->

<main [ngClass]="{'desktop-centered-costs-form': mobileSize === true}">
  <form class="costs-form" (ngSubmit)="onSubmit()" #costsForm="ngForm">
    <div class="costs-form__grid-list" [ngStyle]="{'max-width': mobileSize ? '100%' : '50%'}">
      <div class="costs-form__grid-list__grid-tile" *ngFor="let cost of costs; let i = index">
        <mat-form-field class="costs-form__form-field" appearance="standard" >
          <mat-label for="cost">
            {{ cost.name }}: <b>{{cost.value | currency: 'USD'}}</b>
            <span class="material-icons"> {{ cost.iconName }} </span>
          </mat-label>
            <input type="number" required matInput (click)="setCostIndex(i);" [ngModel]="cost.value" (ngModelChange)="costsModelChanged.next($event)" name="cost">
        </mat-form-field>
      </div>
    </div>

    <button class="costs-form__submit-btn" type="submit">Calculate Total Cost.</button>

  </form>

  <section class="info-about-costs-form">
    <span class="if-costs-updated" *ngIf="updated">Costs have been updated.</span>
    <span class="if-costs-failed" *ngIf="failed">Costs have not been updated. Please remove your response and try again.</span>

    <div class="total-cost" *ngIf="updated">
      Total Cost = {{ totalCost | currency: 'USD' }}
    </div>
  </section>
</main>
