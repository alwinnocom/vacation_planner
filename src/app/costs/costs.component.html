<!-- ngFor keyvalue pipe = https://stackoverflow.com/questions/41396435/how-to-iterate-object-keys-using-ngfor/41396558 -->

<form (ngSubmit)="onSubmit()" #costsForm="ngForm">
  <mat-grid-list cols="2" rowHeight="100px">
    <mat-grid-tile *ngFor="let cost of costs; let i = index">
      <mat-form-field appearance="standard" >
        <mat-label for="cost">{{ cost.name }}: <b>{{cost.value | currency: 'USD'}}</b></mat-label>
          <input type="number" required matInput (click)="setCostIndex(i);" [ngModel]="cost.value" (ngModelChange)="costsModelChanged.next($event)" name="cost">
      </mat-form-field>
    </mat-grid-tile>
  </mat-grid-list>

  <button type="submit">Calculate Total Cost.</button>

  <!-- <h3>Add a new category of costs here.</h3>
  <h5>Please wait 1 second for it to update.</h5> -->

  <!-- ngFor Tracking required here: https://stackoverflow.com/questions/45239739/angular2-ngfor-does-not-update-when-array-is-updated -->
  <!-- Backend database (MongoDB) required for this. -->

  <!-- <mat-form-field id="Create:Add_to_costs_array">
    <mat-label>New category: {{ costsUpdated }}: $0.00</mat-label>
    <input type="text" required matInput [ngModel]="costsUpdated" (ngModelChange)="costsModelChanged.next($event)">
  </mat-form-field> -->

</form>

<!-- <form (ngSubmit)="onDatabaseChange()" #dataForm="ngForm">
  <mat-form-field>
    <button type="submit">Submit new cost.</button>
  </mat-form-field>
</form> -->


<span *ngIf="updated">Costs have been updated.</span>
<span *ngIf="failed">Costs have not been updated. Please remove your response and try again.</span>

<div>
  Total Cost = {{ totalCost | currency: 'USD' }}
</div>
